<h1><center>Results</center></h1>

<html>
<head>

  </head>
  <body>
<table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
<tr>
	<th>Sr.No.</th>
	<th>Question</th>
	<th>Answers</th>
	<th>Total Attempt</th>
	<th>Count</th>
	
</tr>
<% sr_no=0 %>
<% @question_results.map(&:question).uniq.each do |que| %>
<% sr_no+=1 %>
	<tr>
		<td><strong><%= sr_no %></strong></td>
		<td>
 			<%= que.que_content %>
 		</td>
 		<% @options = GivenAnswer.where(:question_id => que.id) %>
 		<%################ Answer column ##############%>
 		<td> 
 			<ul>
 				<% checkbox_array=[] %>				
 				<% @options.map(&:answer).uniq.each do |option| %>

 					<% if que.types == "checkbox" %>
 						<% checkbox_array=checkbox_array + option.split('\n') %>
 					<% else %>
 						<li><%= option %></li>
 					<% end %> 	
 				<% end %>
 				<% checkbox_array.uniq.each do |checkbox_ans| %>
					<li><%= checkbox_ans %></li> 						
				<% end %>
 		</ul>
 		</td>
 		<%################ Total Attempt column ##############%>
 	<td>				
 		<%= @options.count %>
 	</td>
 	<%################ Answer count column ##############%>
 	<td>	
 		<% checkbox_array=[] %>	
 		<%  @options.map(&:answer).uniq.each do |option| %>
 			<% if que.types == "checkbox" %>
 				<% checkbox_array=checkbox_array + option.split('\n') %>					
			<% else %>			
 				<% @counts = GivenAnswer.where(:answer => option) %>	
 				<%= @counts.count %><br>		
 			<% end%>
 		<% end%>
 				<% checkbox_array.uniq.each do |checkbox_ans| %>
 					<%= checkbox_array.count(checkbox_ans) %><br>	
				<% end %>

 	</td> 	
 </tr>
<% end %>
</table>
</body>
</html>